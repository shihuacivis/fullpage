(function(t){_fpData={count:0};var i=function(t){this.options=t||{};this.nCurIdx=0;this.TStartX;this.TStartY;this.nWrapHeight;this.nWrapWidth;this.sTouchDir;this.nMovedWrapPos;this.bScrolling;this.nStart=0||this.options.startpage;this.$fpWraper=document.querySelector(this.options.id);this.swipeDir=this.options.direction||"X";this.swipeDir=this.swipeDir.toUpperCase();this.init().bindEvents();typeof this.nStart!="undefined"&&this.setStartPage(this.nStart);_fpData.count++};i.prototype.index=function(){return this.nCurIdx};i.prototype.setStartPage=function(t){var i=this.$fpWraper.childElementCount;t=0||t;t=i<=t?0:t;this.setCurrent(t)};i.prototype.start=function(t){var i=this.getCurrent();i.classList.add("active");this.finish()};i.prototype.resize=function(){this.nWrapWidth=this.$fpWraper.parentNode.clientWidth;this.nWrapHeight=this.$fpWraper.parentNode.clientHeight;return this};i.prototype.init=function(t){var i=this;this.resize();var r=this.$fpWraper.firstElementChild;if(!r)throw"ERROR";for(var e=0;e<this.$fpWraper.children.length;e++){var s=this.$fpWraper.children[e];var n="X"==this.swipeDir?"translate3d("+this.nWrapWidth*e+"px,0,0)":"translate3d(0,"+this.nWrapHeight*e+"px,0)";s.style.webkitTransform=n;s.style.transform=n}return this};i.prototype.bindEvents=function(){var t=this;window.addEventListener("resize orientationchange",this.init(this),false);window.addEventListener("touchmove",function(t){t.preventDefault()},false);_fpData.count<2&&window.addEventListener("mousewheel",this.mousewheel.bind(this),false);"touchstart touchmove touchend touchcancel".split(" ").forEach(function(i){t.$fpWraper.addEventListener(i,t[i].bind(t),false)});return this};i.prototype.mousewheel=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;this.bScrolling||(this.bScrolling=!0,t.wheelDelta>0?this.prev():this.next())};i.prototype.touchstart=function(t){var i=t.touches[0];this.sTouchDir=null;this.nMovedWrapPos=0;this.TStartX=i.pageX;this.TStartY=i.pageY};i.prototype.touchmove=function(t){var i=t.touches[0];var r=i.pageX-this.TStartX;var e=i.pageY-this.TStartY;var s=-this.nCurIdx*this.nWrapWidth+r;var n=-this.nCurIdx*this.nWrapHeight+e;var h=-this.nCurIdx*("X"==this.swipeDir?this.nWrapWidth:this.nWrapHeight);var a=this.getCurrent();var o=a.nextElementSibling;var p=a.previousElementSibling;var u=this.$fpWraper;if(!this.sTouchDir){this.sTouchDir=Math.abs(r)>Math.abs(e)?"X":"Y";if(this.sTouchDir===this.swipeDir){u.classList.add("moving")}}if(this.sTouchDir===this.swipeDir){t.preventDefault();t.stopPropagation();switch(this.swipeDir){case"X":this.nMovedWrapPos=s;s>h?!p&&(s=h):!o&&(s=h);this.setX(s);break;case"Y":this.nMovedWrapPos=n;n>h?!p&&(n=h):!o&&(n=h);this.setY(n);break}}};i.prototype.touchend=function(t){var i=50;var r=this.nMovedWrapPos+this.nCurIdx*("X"==this.swipeDir?this.nWrapWidth:this.nWrapHeight);var e=this.getCurrent();var s=e.nextElementSibling;var n=e.previousElementSibling;var h=this.$fpWraper;h.classList.remove("moving");if(!this.sTouchDir)return;t.preventDefault();if(r<-i&&s)return this.next();if(r>i&&n)return this.prev();this.reset()};i.prototype.touchcancel=function(t){this.$fpWraper.classList.remove("moving");this.reset()};i.prototype.setX=function(t,i){this.$fpWraper.style.webkitTransform="translate3d("+t+"px,0,0)";this.$fpWraper.style.transform="translate3d("+t+"px,0,0)"};i.prototype.setY=function(t,i){this.$fpWraper.style.webkitTransform="translate3d(0,"+t+"px,0)";this.$fpWraper.style.transform="translate3d(0,"+t+"px,0)"};i.prototype.getCurrent=function(){return this.$fpWraper.children[+this.nCurIdx]};i.prototype.setCurrent=function(t){this.nCurIdx=t?t:this.nCurIdx;var i=-this.nCurIdx*("X"==this.swipeDir?this.nWrapWidth:this.nWrapHeight);"X"==this.swipeDir?this.setX(i):this.setY(i)};i.prototype.reset=function(){this.setCurrent()};i.prototype.next=function(){this.go(+this.nCurIdx+1)};i.prototype.prev=function(){this.go(+this.nCurIdx-1)};i.prototype.go=function(t){var i=this.getCurrent();var r=this.$fpWraper.childElementCount;var e=this.$fpWraper.children[t];if(t===this.nCurIdx||t<0||t>=r){this.bScrolling=false;return}this.nCurIdx=+t;this.setCurrent(+t);this.finish(i,e)};i.prototype.finish=function(t,i){var r=this;r.sTouchDir=null;var e=this.options.callback;setTimeout(function(){t&&t.classList.remove("active");i&&i.classList.add("active");r.bScrolling=false},300);if(e&&typeof e==="function")e.call(this,this.nCurIdx)};window.fullpage=i})(this);